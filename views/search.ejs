<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/search/style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@400;700&display=swap">
  <title >Fi Tri9i</title>
</head>
<body>

  <%-include('./partials/navbar.ejs')  %>


  <main class="content">
   
    <div class="box">
      <img src="pics/alger.svg" class="dz">
      <div class="search">

        <img src="pics/pos.svg" class="pos">
        <input type="text" class="input1" id="input1" placeholder="place de depart">
        <div class="vertical"></div>
      
        <img src="pics/pos.svg" class="pos2">
        <input type="text" class="input4" id="input4" placeholder="Où souhaitez-vous aller ?">
        <div class="vertical"></div>

        <img src="pics/cal.svg" class="cal">
        <input type="date" class="input2" id="input2" placeholder="Aujourd'hui">
        <div class="vertical"></div>

        <img src="pics/pp.svg" class="pp">
        <input type="number" class="input3" id="input3" placeholder="01">
       
        <button class="look" id="look">Recherche</button>
      </div>
    
    
    </div> 

    <div class="arslane" id="arslane">
    <div class="box1">
      <div class="adjust" id="adjust1">
        <p class="tit">Le moins cher</p>
        
      </div>

      <div class="adjust"  id="adjust2">
        <p class="tit">Le plus comfort</p>
       
      </div>
    </div>
    <div>
      <div class="Barca">
        <p class="Tri">Tri par :</p> 
        <div class="in">
          <input type="radio" id="allo1" name="trajet" class="allo" checked>
          <label for="allo1">Départ le plus tôt</label>
        </div>
        <div class="in">
          <input type="radio" name="trajet" id="allo2" class="allo" >
          <label for="allo2">Prix le plus bas</label>
        </div>
        <div class="in">
          <input type="radio" name="trajet" id="allo3" class="allo">
          <label for="allo3">Trajet le plus court</label>
        </div>
      </div>
      <div class="line2"></div>
      <div class="Barca"><p class="apartir">A partir de :</p> <p class="heure" id="heure"> 8:00</p> <img class="heure-img" src="pics/clock.svg"> <p  class="trajets" id="trajets">trajets :</p> <p class="nbr-trajet" id="nbr-trajet"> 12</p> </div>
    </div>

  



    <div class="container">
      <div class="column1" id="column1">




      </div>
      <div class="column2" id="column2">




      </div>
    </div>

  </div>
  </main>


  <script>
    let cardData = [
      {
        date: "2024-04-22",
        departure: {
          date: "12:06",
          place: "Alger"
        },
        arrival: {
          date: "12:06",
          place: "Oran"
        },
        price: "450 da",
        driver: {
          name: "Ahmed Belkacem",
          rate: "4.5"
        },
        available_places: "2 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "13:00",
          place: "Oran"
        },
        arrival: {
          date: "15:30",
          place: "Constantine"
        },
        price: "500 da",
        driver: {
          name: "Fatima Zohra",
          rate: "4.8"
        },
        available_places: "1 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "09:30",
          place: "Constantine"
        },
        arrival: {
          date: "13:45",
          place: "Annaba"
        },
        price: "600 da",
        driver: {
          name: "Karim Toufik",
          rate: "4.3"
        },
        available_places: "3 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "08:15",
          place: "Annaba"
        },
        arrival: {
          date: "12:30",
          place: "Batna"
        },
        price: "700 da",
        driver: {
          name: "Nadia Saadi",
          rate: "4.7"
        },
        available_places: "2 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "10:45",
          place: "Batna"
        },
        arrival: {
          date: "14:00",
          place: "Setif"
        },
        price: "270 da",
        driver: {
          name: "ahmed rami",
          rate: "5"
        },
        available_places: "5 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "10:45",
          place: "Batna"
        },
        arrival: {
          date: "14:00",
          place: "Setif"
        },
        price: "270 da",
        driver: {
          name: "ahmed rami",
          rate: "5"
        },
        available_places: "5 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "10:45",
          place: "Batna"
        },
        arrival: {
          date: "14:00",
          place: "Setif"
        },
        price: "270 da",
        driver: {
          name: "ahmed rami",
          rate: "5"
        },
        available_places: "5 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "10:45",
          place: "Batna"
        },
        arrival: {
          date: "14:00",
          place: "Setif"
        },
        price: "270 da",
        driver: {
          name: "ahmed rami",
          rate: "5"
        },
        available_places: "5 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "10:45",
          place: "Batna"
        },
        arrival: {
          date: "14:00",
          place: "Setif"
        },
        price: "270 da",
        driver: {
          name: "ahmed rami",
          rate: "5"
        },
        available_places: "5 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "10:45",
          place: "Batna"
        },
        arrival: {
          date: "14:00",
          place: "Setif"
        },
        price: "150 da",
        driver: {
          name: "ahmed rami",
          rate: "3"
        },
        available_places: "5 places"
      },
      {
        date: "2024-04-22",
        departure: {
          date: "10:45",
          place: "Batna"
        },
        arrival: {
          date: "14:00",
          place: "Setif"
        },
        price: "400 da",
        driver: {
          name: "ahmed rami",
          rate: "10"
        },
        available_places: "5 places"
      },
    ];

    const newData = [<%-trips%>];
    console.log(newData)
    for (let i = 0; i < newData.length; i++) {
      if (newData[i]) {
        console.log(cardData[i])
        cardData[i].departure = {};
        cardData[i].arrival = {};
        cardData[i].driver = {};
        cardData[i].departure.place = newData[i].depart || "";
        cardData[i].departure.date = newData[i].time || "";
        cardData[i].arrival.place = newData[i].arrivee || "";
        cardData[i].arrival.date = newData[i].arrivee_time || "99 : 99";
        cardData[i].date = newData[i].dateData || "";
        cardData[i].price = newData[i].price || "";
        cardData[i].driver.name = newData[i].driver.name || "";
        cardData[i].driver.rate = String(newData[i].driver.rate)  || "";
        cardData[i].available_places = newData[i].available_places + " places" || "";
        console.log(cardData[i])
        }
    }
    console.log(newData)
    function findCheapestCard(cards) {
      if (cards.length === 0) {
          return null; 
      }
    
      let cheapestCard = cards[0];
    
      for (let i = 1; i < cards.length; i++) {
          if (parseInt(cards[i].price) < parseInt(cheapestCard.price)) {
              cheapestCard = cards[i]; 
          }
      }
    
      return cheapestCard;
    }
    
    
    function findMostComfortableCard(cards) {
      if (cards.length === 0) {
          return null; 
      }
    
      let mostComfortableCard = cards[0]; 
    
      for (let i = 1; i < cards.length; i++) {
          if (parseFloat(cards[i].driver.rate) > parseFloat(mostComfortableCard.driver.rate)) {
              mostComfortableCard = cards[i];
          }
      }
    
      return mostComfortableCard;
    }</script>
<script src="/search/script.js"></script>
</body>
</html>